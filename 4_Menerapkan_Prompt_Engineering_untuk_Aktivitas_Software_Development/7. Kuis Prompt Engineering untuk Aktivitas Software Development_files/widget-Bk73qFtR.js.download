const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnreadMessages-B8kCEOjN.js","assets/useBranding-78t2cBKJ.js","assets/_plugin-vue_export-helper-DG4P_01H.js","assets/utils.esm-CMazHLgs.js","assets/useBranding-aTKfDg_G.css","assets/UnreadMessageList-mxgKt5SV.js","assets/module-CxJOWM_e.js","assets/Icon-Br_HG2DA.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/_commonjsHelpers-BosuxZz1.js","assets/index-DGvcsSzM.js","assets/Validators-BM89Tp7H.js","assets/index-DN3rM4CW.js","assets/colorHelper-DkkSNPxc.js","assets/UnreadMessageList-C80tQpqe.css","assets/sharedFrameEvents-0qZ2yOho.js","assets/constants-lVAyZKq6.js","assets/Branding-BS-MvpW4.js","assets/Campaigns-_d3lWSYp.js","assets/Home-DkuEY_n1.js","assets/PreChatForm-Bn4KdhxQ.js","assets/Button-0URonJLr.js","assets/helper-BVTgYTlr.js","assets/PreChatForm-CGQujdTq.css","assets/Messages-Bhm_JZLS.js","assets/typing-4-9WbkzX.js","assets/index-Cw6s38ZS.js","assets/EmojiInput-BNWKVUmY.js","assets/EmojiInput-UuZ9lxv7.css","assets/StarRating-BCKNPX3F.js","assets/Messages-ygpkYUrV.css","assets/ArticleViewer-Cl1FioXJ.js","assets/IframeLoader-LMsN22VU.js"])))=>i.map(i=>d[i]);
var ba=Object.defineProperty;var Ea=(e,t,a)=>t in e?ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var I=(e,t,a)=>Ea(e,typeof t!="symbol"?t+"":t,a);import{c as S,a4 as Gt,_ as me,x as te,n as D,o as O,e as R,q as z,g as H,p as F,t as $,F as B,j as xa,m as X,H as N,a as he,I as Xt,i as Te,k as Oa,u as Da}from"./_plugin-vue_export-helper-DG4P_01H.js";import{e as Z,o as Aa,p as Sa,c as Me,t as pe,m as vt,S as Ua,v as Ce,u as Zt,n as Ia}from"./useBranding-78t2cBKJ.js";import{u as Pa,k as Na}from"./vue-dompurify-html-CEAHYyWB.js";import{g as mt,S as ka,f as Wa,b as Fa,h as Ra,i as Ot,p as La}from"./sharedFrameEvents-0qZ2yOho.js";import{y as Ha}from"./utils.esm-CMazHLgs.js";import{A as Ya,W as Dt,M as ve}from"./constants-lVAyZKq6.js";import{L as be,E as $a,l as Ba,a as Kt,B as za,o as Va,be as qa,bf as Ga,bg as Xa}from"./Validators-BM89Tp7H.js";import{y as Qt,z as Za,v as Ka,u as Qa,B as ja,_ as Ja,A as en,q as se,w as tn,x as an,c as nn}from"./index-DGvcsSzM.js";import{a as rn}from"./Icon-Br_HG2DA.js";import{B as sn}from"./Branding-BS-MvpW4.js";import{F as jt,d as on,a as un}from"./module-CxJOWM_e.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-DN3rM4CW.js";const A=Ha.create({baseURL:Ya,withCredentials:!1}),Jt=(e,t="X-Auth-Token")=>{A.defaults.headers.common[t]=e},ea=()=>({initiated_at:{timestamp:new Date().toString()},referer:window.referrerURL||""}),ln={create(e){const t=mt(window.location.search);return A.post(`/api/v1/widget/events${t}`,{name:e,event_info:ea()})}},cn=e=>{const t=window.referrerURL||"";return{url:`/api/v1/widget/conversations${mt(window.location.search)}`,params:{contact:{name:e.fullName,email:e.emailAddress,phone_number:e.phoneNumber},message:{content:e.message,timestamp:new Date().toString(),referer_url:t},custom_attributes:e.customAttributes}}},dn=(e,t)=>{const a=window.referrerURL||"";return{url:`/api/v1/widget/messages${mt(window.location.search)}`,params:{message:{content:e,reply_to:t,timestamp:new Date().toString(),referer_url:a}}}},fn=({attachment:e,replyTo:t=null})=>{const{referrerURL:a=""}=window,n=new Date().toString(),{file:o}=e,r=new FormData;return typeof o=="string"?r.append("message[attachments][]",o):r.append("message[attachments][]",o,o.name),r.append("message[referer_url]",a),r.append("message[timestamp]",n),t!==null&&r.append("message[reply_to]",t),{url:`/api/v1/widget/messages${window.location.search}`,params:r}},gn=({before:e,after:t})=>({url:`/api/v1/widget/messages${window.location.search}`,params:{before:e,after:t}}),pn=e=>({url:`/api/v1/widget/messages/${e}${window.location.search}`}),hn=e=>({url:"/api/v1/widget/inbox_members",params:{website_token:e}}),vn=e=>({url:"/api/v1/widget/campaigns",params:{website_token:e}}),mn=({websiteToken:e,campaignId:t,customAttributes:a})=>({url:"/api/v1/widget/events",data:{name:"campaign.triggered",event_info:{campaign_id:t,custom_attributes:a,...ea()}},params:{website_token:e}}),_n=(e,t)=>({url:`/hc/${e}/${t}/articles.json`,params:{page:1,sort:"views",status:1,per_page:6}}),K={createConversation:cn,sendMessage:dn,sendAttachment:fn,getConversation:gn,updateMessage:pn,getAvailableAgents:hn,getCampaigns:vn,triggerCampaign:mn,getMostReadArticles:_n},wn=async e=>{const t=K.getAvailableAgents(e);return A.get(t.url,{params:t.params})},Cn=24*60*60*1e3,_t=(e,t=Cn)=>{try{const a=be.get(e);if(!a)return null;const{data:n,timestamp:o}=a;return Date.now()-o>t?(be.remove(e),null):n}catch{return null}},wt=(e,t)=>{try{const a={data:t,timestamp:Date.now()};be.set(e,a)}catch{}},yn={records:[],uiFlags:{isError:!1,hasFetched:!1}},Tn={getHasFetched:e=>e.uiFlags.hasFetched,availableAgents:e=>e.records.filter(t=>t.availability_status==="online")},At="chatwoot_available_agents_",Mn={fetchAvailableAgents:async({commit:e},t)=>{try{const a=_t(`${At}${t}`);if(a){e("setAgents",a),e("setError",!1),e("setHasFetched",!0);return}const{data:n}=await wn(t),{payload:o=[]}=n;wt(`${At}${t}`,o),e("setAgents",o),e("setError",!1),e("setHasFetched",!0)}catch{e("setError",!0),e("setHasFetched",!0)}},updatePresence:async({commit:e},t)=>{e("updatePresence",t)}},bn={setAgents(e,t){e.records=t},updatePresence:$a,setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t}},En={namespaced:!0,state:yn,getters:Tn,actions:Mn,mutations:bn},xn="CLEAR_CONVERSATION_ATTRIBUTES",ta="SET_CONVERSATION_ATTRIBUTES",aa="SET_WIDGET_APP_CONFIG",na="SET_WIDGET_COLOR",ra="SET_COLOR_SCHEME",sa="UPDATE_CONVERSATION_ATTRIBUTES",oa="TOGGLE_WIDGET_OPEN",ia="SET_REFERRER_HOST",ua="SET_BUBBLE_VISIBILITY",la="SET_ROUTE_UPDATE_STATE",On={hideMessageBubble:!1,isCampaignViewClicked:!1,showUnreadMessagesDialog:!0,isWebWidgetTriggered:!1,isWidgetOpen:!1,position:"right",referrerHost:"",showPopoutButton:!1,widgetColor:"",widgetStyle:"standard",darkMode:"light",isUpdatingRoute:!1,welcomeTitle:"",welcomeDescription:"",availableMessage:"",unavailableMessage:"",enableFileUpload:!0,enableEmojiPicker:!0,enableEndConversation:!0},Dn={getAppConfig:e=>e,isRightAligned:e=>e.position==="right",getHideMessageBubble:e=>e.hideMessageBubble,getIsWidgetOpen:e=>e.isWidgetOpen,getWidgetColor:e=>e.widgetColor,getReferrerHost:e=>e.referrerHost,isWidgetStyleFlat:e=>e.widgetStyle==="flat",darkMode:e=>e.darkMode,getShowUnreadMessagesDialog:e=>e.showUnreadMessagesDialog,getIsUpdatingRoute:e=>e.isUpdatingRoute,getWelcomeHeading:e=>e.welcomeTitle,getWelcomeTagline:e=>e.welcomeDescription,getAvailableMessage:e=>e.availableMessage,getUnavailableMessage:e=>e.unavailableMessage,getShouldShowFilePicker:e=>e.enableFileUpload,getShouldShowEmojiPicker:e=>e.enableEmojiPicker,getCanUserEndConversation:e=>e.enableEndConversation},An={setAppConfig({commit:e},{showPopoutButton:t,position:a,hideMessageBubble:n,showUnreadMessagesDialog:o,widgetStyle:r="rounded",darkMode:s="light",welcomeTitle:i="",welcomeDescription:u="",availableMessage:c="",unavailableMessage:d="",enableFileUpload:_=!0,enableEmojiPicker:w=!0,enableEndConversation:m=!0}){e(aa,{hideMessageBubble:!!n,position:a||"right",showPopoutButton:!!t,showUnreadMessagesDialog:!!o,widgetStyle:r,darkMode:s,welcomeTitle:i,welcomeDescription:u,availableMessage:c,unavailableMessage:d,enableFileUpload:_,enableEmojiPicker:w,enableEndConversation:m})},toggleWidgetOpen({commit:e},t){e(oa,t)},setWidgetColor({commit:e},t){e(na,t)},setColorScheme({commit:e},t){e(ra,t)},setReferrerHost({commit:e},t){e(ia,t)},setBubbleVisibility({commit:e},t){e(ua,t)},setRouteTransitionState:async({commit:e},t)=>{e(la,t)}},Sn={[aa](e,t){e.showPopoutButton=t.showPopoutButton,e.position=t.position,e.hideMessageBubble=t.hideMessageBubble,e.widgetStyle=t.widgetStyle,e.darkMode=t.darkMode,e.locale=t.locale||e.locale,e.showUnreadMessagesDialog=t.showUnreadMessagesDialog,e.welcomeTitle=t.welcomeTitle,e.welcomeDescription=t.welcomeDescription,e.availableMessage=t.availableMessage,e.unavailableMessage=t.unavailableMessage,e.enableFileUpload=t.enableFileUpload,e.enableEmojiPicker=t.enableEmojiPicker,e.enableEndConversation=t.enableEndConversation},[oa](e,t){e.isWidgetOpen=t},[na](e,t){e.widgetColor=t},[ia](e,t){e.referrerHost=t},[ua](e,t){e.hideMessageBubble=t},[ra](e,t){e.darkMode=t},[la](e,t){e.isUpdatingRoute=t}},Un={namespaced:!0,state:On,getters:Dn,actions:An,mutations:Sn},In=e=>e?Object.keys(e).length===0&&e.constructor===Object:!0,Ct=e=>{window.parent.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`,"*")},P={isIFrame:()=>window.self!==window.top,sendMessage:Ct,isAValidEvent:e=>typeof e.data=="string"&&e.data.indexOf(Dt)===0,getMessage:e=>JSON.parse(e.data.replace(Dt,""))},le={isRNWebView:()=>window.ReactNativeWebView,sendMessage:e=>{window.ReactNativeWebView.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`)}},Pn=(e,t)=>e.reduce((a,n)=>{var o;return(a[o=t(n)]||(a[o]=[])).push(n),a},{}),ie=e=>`/api/v1/${e}${window.location.search}`,ue={get(){return A.get(ie("widget/contact"))},update(e){return A.patch(ie("widget/contact"),e)},setUser(e,t){return A.patch(ie("widget/contact/set_user"),{identifier:e,...t})},setCustomAttributes(e={}){return A.patch(ie("widget/contact"),{custom_attributes:e})},deleteCustomAttribute(e){return A.post(ie("widget/contact/destroy_custom_attributes"),{custom_attributes:[e]})}},Nn={currentUser:{}},ca="SET_CURRENT_USER",kn=e=>e&&e.response&&e.response.data?e.response.data:e,Wn=e=>{e&&(Jt(e),Ct({event:"setAuthCookie",data:{widgetAuthToken:e}}))},Fn={getCurrentUser(e){return e.currentUser}},Rn={get:async({commit:e})=>{try{const{data:t}=await ue.get();e(ca,t)}catch{}},update:async({dispatch:e},{user:t})=>{try{await ue.update(t),e("get")}catch{}},setUser:async({dispatch:e},{identifier:t,user:a})=>{try{const{email:n,name:o,avatar_url:r,identifier_hash:s,phone_number:i,company_name:u,city:c,country_code:d,description:_,custom_attributes:w,social_profiles:m}=a,M={email:n,name:o,avatar_url:r,identifier_hash:s,phone_number:i,additional_attributes:{company_name:u,city:c,description:_,country_code:d,social_profiles:m},custom_attributes:w},{data:{widget_auth_token:v}}=await ue.setUser(t,M);Wn(v),e("get"),(s||v)&&(e("conversation/clearConversations",{},{root:!0}),e("conversation/fetchOldConversations",{},{root:!0}),e("conversationAttributes/getAttributes",{},{root:!0}))}catch(n){const o=kn(n);Ct({event:"error",errorType:ka,data:o})}},setCustomAttributes:async(e,t={})=>{try{await ue.setCustomAttributes(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await ue.deleteCustomAttribute(t)}catch{}}},Ln={[ca](e,t){const{currentUser:a}=e;e.currentUser={...a,...t}}},Hn={namespaced:!0,state:Nn,getters:Fn,actions:Rn,mutations:Ln},St=({attachments:e,content:t,replyTo:a})=>{const n=new Date().getTime()/1e3;return{id:Ba(),content:t,attachments:e,status:"in_progress",replyTo:a,created_at:n,message_type:ve.INCOMING}},Ut=e=>e.sender?e.sender.name:"",Yn=(e,t)=>{const a=Ut(e),n=Ut(t);return a!==n||e.message_type!==t.message_type||Qt(t)},$n=e=>e.map((t,a)=>{let n;const o=a===e.length-1;if(Qt(t))n=!1;else if(o)n=!0;else{const r=e[a+1];n=Yn(t,r)}return{showAvatar:n,...t}}),Bn=(e,{content:t})=>Object.values(e).filter(a=>a.content===t&&a.status==="in_progress"),It=({messages:e})=>e.filter(t=>!(t.content_attributes&&t.content_attributes.deleted)),zn={getAllMessagesLoaded:e=>e.uiFlags.allMessagesLoaded,getIsCreating:e=>e.uiFlags.isCreating,getIsAgentTyping:e=>e.uiFlags.isAgentTyping,getConversation:e=>e.conversations,getConversationSize:e=>Object.keys(e.conversations).length,getEarliestMessage:e=>{const t=Object.values(e.conversations);return t.length?t[0]:{}},getLastMessage:e=>{const t=Object.values(e.conversations);return t.length?t[t.length-1]:{}},getGroupedConversation:e=>{const t=Pn(Object.values(e.conversations),a=>Za(a.created_at));return Object.keys(t).map(a=>({date:a,messages:$n(t[a])}))},getIsFetchingList:e=>e.uiFlags.isFetchingList,getMessageCount:e=>Object.values(e.conversations).length,getUnreadMessageCount:e=>{const{userLastSeenAt:t}=e.meta;return Object.values(e.conversations).filter(a=>{const{created_at:n,message_type:o}=a,r=o===ve.OUTGOING;return(t?n*1e3>t*1e3:!0)&&r}).length},getUnreadTextMessages:(e,t)=>{const a=t.getUnreadMessageCount,o=[...Object.values(e.conversations)].filter(s=>{const{message_type:i}=s;return i===ve.OUTGOING}),r=Math.min(a,3);return o.splice(-r)}},Vn=async e=>{const t=K.createConversation(e);return A.post(t.url,t.params)},qn=async(e,t=null)=>{const a=K.sendMessage(e,t);return A.post(a.url,a.params)},Gn=async(e,t=null)=>{const a=K.sendAttachment(e,t);return A.post(a.url,a.params)},Pt=async({before:e,after:t})=>{const a=K.getConversation({before:e,after:t});return A.get(a.url,{params:a.params})},Xn=async()=>A.get(`/api/v1/widget/conversations${window.location.search}`),Zn=async({typingStatus:e})=>A.post(`/api/v1/widget/conversations/toggle_typing${window.location.search}`,{typing_status:e}),Kn=async({lastSeen:e})=>A.post(`/api/v1/widget/conversations/update_last_seen${window.location.search}`,{contact_last_seen_at:e}),Wo=async()=>A.post(`/api/v1/widget/conversations/transcript${window.location.search}`),Qn=async()=>A.get(`/api/v1/widget/conversations/toggle_status${window.location.search}`),jn=async e=>A.post(`/api/v1/widget/conversations/set_custom_attributes${window.location.search}`,{custom_attributes:e}),Jn=async e=>A.post(`/api/v1/widget/conversations/destroy_custom_attributes${window.location.search}`,{custom_attribute:[e]}),da="ON_AGENT_MESSAGE_RECEIVED",er="ON_UNREAD_MESSAGE_CLICK",tr="ON_CAMPAIGN_MESSAGE_CLICK",ar="ON_CONVERSATION_CREATED",nr={createConversation:async({commit:e,dispatch:t},a)=>{e("setConversationUIFlag",{isCreating:!0});try{const{data:n}=await Vn(a),{messages:o}=n,[r={}]=o;e("pushMessageToConversation",r),t("conversationAttributes/getAttributes",{},{root:!0}),Z.emit(ar)}catch{}finally{e("setConversationUIFlag",{isCreating:!1})}},sendMessage:async({dispatch:e},t)=>{const{content:a,replyTo:n}=t,o=St({content:a,replyTo:n});e("sendMessageWithData",o)},sendMessageWithData:async({commit:e},t)=>{const{id:a,content:n,replyTo:o,meta:r={}}=t;e("pushMessageToConversation",t),e("updateMessageMeta",{id:a,meta:{...r,error:""}});try{const{data:s}=await qn(n,o);e("pushMessageToConversation",{...s,status:"sent"})}catch{e("pushMessageToConversation",{...t,status:"failed"}),e("updateMessageMeta",{id:a,meta:{...r,error:""}})}},setLastMessageId:async({commit:e})=>{e("setLastMessageId")},sendAttachment:async({commit:e},t)=>{const{attachment:{thumbUrl:a,fileType:n},meta:o={}}=t,s=St({attachments:[{thumb_url:a,data_url:a,file_type:n,status:"in_progress"}],replyTo:t.replyTo});e("pushMessageToConversation",s);try{const{data:i}=await Gn(t);e("updateAttachmentMessageStatus",{message:i,tempId:s.id}),e("pushMessageToConversation",{...i,status:"sent"})}catch{e("pushMessageToConversation",{...s,status:"failed"}),e("updateMessageMeta",{id:s.id,meta:{...o,error:""}})}},fetchOldConversations:async({commit:e},{before:t}={})=>{try{e("setConversationListLoading",!0);const{data:{payload:a,meta:n}}=await Pt({before:t}),{contact_last_seen_at:o}=n,r=It({messages:a});e("conversation/setMetaUserLastSeenAt",o,{root:!0}),e("setMessagesInConversation",r),e("setConversationListLoading",!1)}catch{e("setConversationListLoading",!1)}},syncLatestMessages:async({state:e,commit:t})=>{try{const{lastMessageId:a,conversations:n}=e,{data:{payload:o,meta:r}}=await Pt({after:a}),{contact_last_seen_at:s}=r,u=It({messages:o}).filter(d=>(n==null?void 0:n[d.id])===void 0);if(!u.length)return;u.forEach(d=>{n[d.id]=d});const c=Object.fromEntries(Object.entries(n).sort((d,_)=>d[1].created_at-_[1].created_at));t("conversation/setMetaUserLastSeenAt",s,{root:!0}),t("setMissingMessagesInConversation",c)}catch{}},clearConversations:({commit:e})=>{e("clearConversations")},addOrUpdateMessage:async({commit:e},t)=>{const{id:a,content_attributes:n}=t;if(n&&n.deleted){e("deleteMessage",a);return}e("pushMessageToConversation",t)},toggleAgentTyping({commit:e},t){e("toggleAgentTypingStatus",t)},toggleUserTyping:async(e,t)=>{try{await Zn(t)}catch{}},setUserLastSeen:async({commit:e,getters:t})=>{if(!t.getConversationSize)return;const a=Date.now()/1e3;try{e("setMetaUserLastSeenAt",a),await Kn({lastSeen:a})}catch{}},resolveConversation:async()=>{await Qn()},setCustomAttributes:async(e,t={})=>{try{await jn(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await Jn(t)}catch{}}},rr={clearConversations(e){e.conversations={}},pushMessageToConversation(e,t){const{id:a,status:n,message_type:o}=t,r=e.conversations;if(!(o===ve.INCOMING)||n==="in_progress"){r[a]=t;return}const[u]=Bn(r,t);u&&delete r[u.id],r[a]=t},updateAttachmentMessageStatus(e,{message:t,tempId:a}){const{id:n}=t,o=e.conversations;o[a]&&(delete o[a],o[n]={...t})},setConversationUIFlag(e,t){e.uiFlags={...e.uiFlags,...t}},setConversationListLoading(e,t){e.uiFlags.isFetchingList=t},setMessagesInConversation(e,t){if(!t.length){e.uiFlags.allMessagesLoaded=!0;return}t.forEach(a=>{e.conversations[a.id]=a})},setMissingMessagesInConversation(e,t){e.conversation=t},updateMessage(e,{id:t,content_attributes:a}){e.conversations[t]={...e.conversations[t],content_attributes:{...e.conversations[t].content_attributes||{},...a}}},updateMessageMeta(e,{id:t,meta:a}){const n=e.conversations[t];if(!n)return;const o=n.meta?{...n.meta,...a}:{...a};n.meta={...o}},deleteMessage(e,t){delete e.conversations[t]},toggleAgentTypingStatus(e,{status:t}){e.uiFlags.isAgentTyping=t==="on"},setMetaUserLastSeenAt(e,t){e.meta.userLastSeenAt=t},setLastMessageId(e){const{conversations:t}=e,a=Object.values(t).pop();if(!a)return;const{id:n}=a;e.lastMessageId=n}},sr={conversations:{},meta:{userLastSeenAt:void 0},uiFlags:{allMessagesLoaded:!1,isFetchingList:!1,isAgentTyping:!1,isCreating:!1},lastMessageId:null},or={namespaced:!0,state:sr,getters:zn,actions:nr,mutations:rr},ir={id:"",status:""},ur={getConversationParams:e=>e},lr={getAttributes:async({commit:e})=>{try{const{data:t}=await Xn(),{contact_last_seen_at:a}=t;e(ta,t),e("conversation/setMetaUserLastSeenAt",a,{root:!0})}catch{}},update({commit:e},t){e(sa,t)},clearConversationAttributes:({commit:e})=>{e("CLEAR_CONVERSATION_ATTRIBUTES")}},cr={[ta](e,t){e.id=t.id,e.status=t.status},[sa](e,t){t.id===e.id&&(e.id=t.id,e.status=t.status)},[xn](e){e.id="",e.status=""}},dr={namespaced:!0,state:ir,getters:ur,actions:lr,mutations:cr},Nt=e=>`/api/v1/${e}${window.location.search}`,kt={create(e){return A.post(Nt("widget/labels"),{label:e})},destroy(e){return A.delete(Nt(`widget/labels/${e}`))}},fr={},gr={},pr={create:async(e,t)=>{try{await kt.create(t)}catch{}},destroy:async(e,t)=>{try{await kt.destroy(t)}catch{}}},hr={},vr={namespaced:!0,state:fr,getters:gr,actions:pr,mutations:hr},mr={create:async(e,{name:t})=>{try{await ln.create(t)}catch{}}},_r={namespaced:!0,state:{},getters:{},actions:mr,mutations:{}},wr={update:({messageId:e,email:t,values:a})=>{const n=K.updateMessage(e);return A.patch(n.url,{contact:{email:t},message:{submitted_values:a}})}},Cr={uiFlags:{isUpdating:!1}},yr={getUIFlags:e=>e.uiFlags},Tr={update:async({commit:e,dispatch:t,getters:{getUIFlags:a}},{email:n,messageId:o,submittedValues:r})=>{if(!a.isUpdating){e("toggleUpdateStatus",!0);try{await wr.update({email:n,messageId:o,values:r}),e("conversation/updateMessage",{id:o,content_attributes:{submitted_email:n,submitted_values:n?null:r}},{root:!0}),t("contacts/get",{},{root:!0})}catch{}e("toggleUpdateStatus",!1)}}},Mr={toggleUpdateStatus(e,t){e.uiFlags.isUpdating=t}},br={namespaced:!0,state:Cr,getters:yr,actions:Tr,mutations:Mr},Wt=async e=>{const t=K.getCampaigns(e);return A.get(t.url,{params:t.params})},Er=async({campaignId:e,websiteToken:t,customAttributes:a})=>{const n=K.triggerCampaign({websiteToken:t,campaignId:e,customAttributes:a});await A.post(n.url,{...n.data},{params:n.params})};class xr{constructor(){I(this,"initTimers",({campaigns:t},a)=>{this.clearTimers(),t.forEach(n=>{const{timeOnPage:o,id:r}=n;this.campaignTimers[r]=setTimeout(()=>{_e.dispatch("campaign/startCampaign",{campaignId:r,websiteToken:a})},o*1e3)})});I(this,"clearTimers",()=>{this.campaignTimers.forEach(t=>{clearTimeout(t),this.campaignTimers[t]=null})});this.campaignTimers=[]}}const Or=new xr,Dr=(e,t)=>{let a=e;const n=new URL(t);return a.endsWith("/")&&(a=a.slice(0,-1)+"*\\?*\\#*"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),new Ka(a).test(n.toString())},Ar=({campaigns:e})=>e.map(t=>{var a,n;return{id:t.id,triggerOnlyDuringBusinessHours:t.trigger_only_during_business_hours||!1,timeOnPage:(a=t==null?void 0:t.trigger_rules)==null?void 0:a.time_on_page,url:(n=t==null?void 0:t.trigger_rules)==null?void 0:n.url}}),Sr=({campaigns:e,currentURL:t,isInBusinessHours:a})=>e.filter(n=>Dr(n.url,t)?n.triggerOnlyDuringBusinessHours?a:!0:!1),Ft="chatwoot_campaigns_",Ur={records:[],uiFlags:{hasFetched:!1,isError:!1},activeCampaign:{}},ye=(e,t,a,n)=>{const o=Ar({campaigns:e}),r=Sr({campaigns:o,currentURL:t,isInBusinessHours:n});Or.initTimers({campaigns:r},a)},Ir={getCampaigns:e=>e.records,getUIFlags:e=>e.uiFlags,getActiveCampaign:e=>e.activeCampaign},Pr={fetchCampaigns:async({commit:e},{websiteToken:t,currentURL:a,isInBusinessHours:n})=>{try{const r=_t(`${Ft}${t}`,36e5);if(r){e("setCampaigns",r),e("setError",!1),ye(r,a,t,n);return}const{data:s}=await Wt(t);wt(`${Ft}${t}`,s),e("setCampaigns",s),e("setError",!1),ye(s,a,t,n)}catch{e("setError",!0)}},initCampaigns:async({getters:{getCampaigns:e,getUIFlags:t},dispatch:a},{currentURL:n,websiteToken:o,isInBusinessHours:r})=>{e.length?ye(e,n,o,r):t.hasFetched||a("fetchCampaigns",{websiteToken:o,currentURL:n,isInBusinessHours:r})},startCampaign:async({commit:e,rootState:{appConfig:{isWidgetOpen:t}}},{websiteToken:a,campaignId:n})=>{if(!t){const{data:o}=await Wt(a),r=o.find(s=>s.id===n);r&&e("setActiveCampaign",r)}},executeCampaign:async({commit:e},{campaignId:t,websiteToken:a,customAttributes:n})=>{try{e("conversation/setConversationUIFlag",{isCreating:!0},{root:!0}),await Er({campaignId:t,websiteToken:a,customAttributes:n}),e("setCampaignExecuted",!0),e("setActiveCampaign",{})}catch{e("setError",!0)}finally{e("conversation/setConversationUIFlag",{isCreating:!1},{root:!0})}},resetCampaign:async({commit:e})=>{try{e("setCampaignExecuted",!1),e("setActiveCampaign",{})}catch{e("setError",!0)}}},Nr={setCampaigns(e,t){e.records=t,e.uiFlags.hasFetched=!0},setActiveCampaign(e,t){e.activeCampaign=t},setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t},setCampaignExecuted(e,t){e.campaignHasExecuted=t}},kr={namespaced:!0,state:Ur,getters:Ir,actions:Pr,mutations:Nr},Wr=async(e,t)=>{const a=K.getMostReadArticles(e,t);return A.get(a.url,{params:a.params})},Rt="chatwoot_most_read_articles_",Fr={records:[],uiFlags:{isError:!1,hasFetched:!1,isFetching:!1}},Rr={uiFlags:e=>e.uiFlags,popularArticles:e=>e.records},Lr={fetch:async({commit:e},{slug:t,locale:a})=>{e("setIsFetching",!0),e("setError",!1);try{if(!a)return;const n=_t(`${Rt}${t}_${a}`);if(n){e("setArticles",n);return}const{data:o}=await Wr(t,a),{payload:r=[]}=o;wt(`${Rt}${t}_${a}`,r),r.length&&e("setArticles",r)}catch{e("setError",!0)}finally{e("setIsFetching",!1)}}},Hr={setArticles(e,t){e.records=t},setError(e,t){e.uiFlags.isError=t},setIsFetching(e,t){e.uiFlags.isFetching=t}},Yr={namespaced:!0,state:Fr,getters:Rr,actions:Lr,mutations:Hr},_e=Aa({modules:{agent:En,appConfig:Un,contacts:Hn,conversation:or,conversationAttributes:dr,conversationLabels:vr,events:_r,globalConfig:Sa,message:br,campaign:kr,article:Yr}}),yt={computed:{useInboxAvatarForBot(){return this.channelConfig.enabledFeatures.includes("use_inbox_avatar_for_bot")},hasAConnectedAgentBot(){return!!window.chatwootWebChannel.hasAConnectedAgentBot},inboxAvatarUrl(){return window.chatwootWebChannel.avatarUrl},channelConfig(){return window.chatwootWebChannel},hasEmojiPickerEnabled(){return this.channelConfig.enabledFeatures.includes("emoji_picker")},hasAttachmentsEnabled(){return this.channelConfig.enabledFeatures.includes("attachments")},hasEndConversationEnabled(){return this.channelConfig.enabledFeatures.includes("end_conversation")},preChatFormEnabled(){return window.chatwootWebChannel.preChatFormEnabled},preChatFormOptions(){let e="";const t=window.chatwootWebChannel.preChatFormOptions||{};e=t.pre_chat_message;const{pre_chat_fields:a=[]}=t;return{preChatMessage:e,preChatFields:a}},shouldShowPreChatForm(){const{preChatFields:e}=this.preChatFormOptions,t=e.filter(a=>a.enabled).length>0;return this.preChatFormEnabled&&t}}},Lt=()=>({event:"loaded",config:{authToken:window.authToken,channelConfig:window.chatwootWebChannel}}),$r=()=>{const e=document.querySelector(".unread-messages"),t=document.querySelector(".close-unread-wrap"),a=document.querySelector(".open-read-view-wrap");if(!e)return 0;let n=48+e.scrollHeight;return t&&(n+=t.scrollHeight),a&&(n+=a.scrollHeight),n},Br=e=>{const{previous_changes:t}=e;return!t||!Object.keys(t).includes("content_attributes")?!1:Object.keys(t.content_attributes[1]||{}).includes("submitted_values")},zr=e=>e==="auto",Vr=e=>e==="dark",qr=()=>{var e;return((e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)??!1},Gr=(e,t)=>zr(e)?t:Vr(e);function Xr(){const e=Me("appConfig/darkMode"),t=S(qr),a=S(()=>Gr(e.value,t.value));return{darkMode:e,prefersDarkMode:a}}var Ee={exports:{}},xe={exports:{}},Oe={exports:{}},De={exports:{}},Ae={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,o){if(o.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+o.length+" present")}e.exports=t.default})(Ae,Ae.exports);var k=Ae.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(k);function n(r){return r&&r.__esModule?r:{default:r}}function o(r){(0,a.default)(1,arguments);var s=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&s==="[object Date]"?new Date(r.getTime()):typeof r=="number"||s==="[object Number]"?new Date(r):((typeof r=="string"||s==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}e.exports=t.default})(De,De.exports);var V=De.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=o(V),n=o(k);function o(s){return s&&s.__esModule?s:{default:s}}function r(s){(0,n.default)(1,arguments);var i=(0,a.default)(s);return!isNaN(i)}e.exports=t.default})(Oe,Oe.exports);var Zr=Oe.exports,Se={exports:{}},Ue={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(o,r,s){s=s||{};var i;return typeof a[o]=="string"?i=a[o]:r===1?i=a[o].one:i=a[o].other.replace("{{count}}",r),s.addSuffix?s.comparison>0?"in "+i:i+" ago":i}e.exports=t.default})(Ue,Ue.exports);var Kr=Ue.exports,Ie={exports:{}},Pe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(o){var r=o||{},s=r.width?String(r.width):n.defaultWidth,i=n.formats[s]||n.formats[n.defaultWidth];return i}}e.exports=t.default})(Pe,Pe.exports);var Qr=Pe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Qr);function n(c){return c&&c.__esModule?c:{default:c}}var o={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i={date:(0,a.default)({formats:o,defaultWidth:"full"}),time:(0,a.default)({formats:r,defaultWidth:"full"}),dateTime:(0,a.default)({formats:s,defaultWidth:"full"})},u=i;t.default=u,e.exports=t.default})(Ie,Ie.exports);var jr=Ie.exports,Ne={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function n(o,r,s,i){return a[o]}e.exports=t.default})(Ne,Ne.exports);var Jr=Ne.exports,ke={exports:{}},We={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(o,r){var s=r||{},i=s.context?String(s.context):"standalone",u;if(i==="formatting"&&n.formattingValues){var c=n.defaultFormattingWidth||n.defaultWidth,d=s.width?String(s.width):c;u=n.formattingValues[d]||n.formattingValues[c]}else{var _=n.defaultWidth,w=s.width?String(s.width):n.defaultWidth;u=n.values[w]||n.values[_]}var m=n.argumentCallback?n.argumentCallback(o):o;return u[m]}}e.exports=t.default})(We,We.exports);var es=We.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(es);function n(m){return m&&m.__esModule?m:{default:m}}var o={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},s={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},i={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function d(m,M){var v=Number(m),l=v%100;if(l>20||l<10)switch(l%10){case 1:return v+"st";case 2:return v+"nd";case 3:return v+"rd"}return v+"th"}var _={ordinalNumber:d,era:(0,a.default)({values:o,defaultWidth:"wide"}),quarter:(0,a.default)({values:r,defaultWidth:"wide",argumentCallback:function(m){return Number(m)-1}}),month:(0,a.default)({values:s,defaultWidth:"wide"}),day:(0,a.default)({values:i,defaultWidth:"wide"}),dayPeriod:(0,a.default)({values:u,defaultWidth:"wide",formattingValues:c,defaultFormattingWidth:"wide"})},w=_;t.default=w,e.exports=t.default})(ke,ke.exports);var ts=ke.exports,Fe={exports:{}},Re={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(o,r){var s=String(o),i=r||{},u=s.match(n.matchPattern);if(!u)return null;var c=u[0],d=s.match(n.parsePattern);if(!d)return null;var _=n.valueCallback?n.valueCallback(d[0]):d[0];return _=i.valueCallback?i.valueCallback(_):_,{value:_,rest:s.slice(c.length)}}}e.exports=t.default})(Re,Re.exports);var as=Re.exports,Le={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){return function(s,i){var u=String(s),c=i||{},d=c.width,_=d&&r.matchPatterns[d]||r.matchPatterns[r.defaultMatchWidth],w=u.match(_);if(!w)return null;var m=w[0],M=d&&r.parsePatterns[d]||r.parsePatterns[r.defaultParseWidth],v;return Object.prototype.toString.call(M)==="[object Array]"?v=o(M,function(l){return l.test(m)}):v=n(M,function(l){return l.test(m)}),v=r.valueCallback?r.valueCallback(v):v,v=c.valueCallback?c.valueCallback(v):v,{value:v,rest:u.slice(m.length)}}}function n(r,s){for(var i in r)if(r.hasOwnProperty(i)&&s(r[i]))return i}function o(r,s){for(var i=0;i<r.length;i++)if(s(r[i]))return i}e.exports=t.default})(Le,Le.exports);var ns=Le.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(as),n=o(ns);function o(g){return g&&g.__esModule?g:{default:g}}var r=/^(\d+)(th|st|nd|rd)?/i,s=/\d+/i,i={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},c={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d={any:[/1/i,/2/i,/3/i,/4/i]},_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},w={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},m={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},M={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},v={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},f={ordinalNumber:(0,a.default)({matchPattern:r,parsePattern:s,valueCallback:function(g){return parseInt(g,10)}}),era:(0,n.default)({matchPatterns:i,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any",valueCallback:function(g){return g+1}}),month:(0,n.default)({matchPatterns:_,defaultMatchWidth:"wide",parsePatterns:w,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:m,defaultMatchWidth:"wide",parsePatterns:M,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:v,defaultMatchWidth:"any",parsePatterns:l,defaultParseWidth:"any"})},p=f;t.default=p,e.exports=t.default})(Fe,Fe.exports);var rs=Fe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(Kr),n=i(jr),o=i(Jr),r=i(ts),s=i(rs);function i(d){return d&&d.__esModule?d:{default:d}}var u={code:"en-US",formatDistance:a.default,formatLong:n.default,formatRelative:o.default,localize:r.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},c=u;t.default=c,e.exports=t.default})(Se,Se.exports);var ss=Se.exports,He={exports:{}},Ye={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){if(n===null||n===!0||n===!1)return NaN;var o=Number(n);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}e.exports=t.default})(Ye,Ye.exports);var ae=Ye.exports,$e={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(ae),n=r(V),o=r(k);function r(i){return i&&i.__esModule?i:{default:i}}function s(i,u){(0,o.default)(2,arguments);var c=(0,n.default)(i).getTime(),d=(0,a.default)(u);return new Date(c+d)}e.exports=t.default})($e,$e.exports);var os=$e.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(ae),n=r(os),o=r(k);function r(i){return i&&i.__esModule?i:{default:i}}function s(i,u){(0,o.default)(2,arguments);var c=(0,a.default)(u);return(0,n.default)(i,-c)}e.exports=t.default})(He,He.exports);var is=He.exports,Be={exports:{}},ze={exports:{}},Ve={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,o){for(var r=n<0?"-":"",s=Math.abs(n).toString();s.length<o;)s="0"+s;return r+s}e.exports=t.default})(Ve,Ve.exports);var fa=Ve.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(fa);function n(s){return s&&s.__esModule?s:{default:s}}var o={y:function(s,i){var u=s.getUTCFullYear(),c=u>0?u:1-u;return(0,a.default)(i==="yy"?c%100:c,i.length)},M:function(s,i){var u=s.getUTCMonth();return i==="M"?String(u+1):(0,a.default)(u+1,2)},d:function(s,i){return(0,a.default)(s.getUTCDate(),i.length)},a:function(s,i){var u=s.getUTCHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(s,i){return(0,a.default)(s.getUTCHours()%12||12,i.length)},H:function(s,i){return(0,a.default)(s.getUTCHours(),i.length)},m:function(s,i){return(0,a.default)(s.getUTCMinutes(),i.length)},s:function(s,i){return(0,a.default)(s.getUTCSeconds(),i.length)},S:function(s,i){var u=i.length,c=s.getUTCMilliseconds(),d=Math.floor(c*Math.pow(10,u-3));return(0,a.default)(d,i.length)}},r=o;t.default=r,e.exports=t.default})(ze,ze.exports);var us=ze.exports,qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=o(V),n=o(k);function o(i){return i&&i.__esModule?i:{default:i}}var r=864e5;function s(i){(0,n.default)(1,arguments);var u=(0,a.default)(i),c=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var d=u.getTime(),_=c-d;return Math.floor(_/r)+1}e.exports=t.default})(qe,qe.exports);var ls=qe.exports,Ge={exports:{}},Xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=o(V),n=o(k);function o(s){return s&&s.__esModule?s:{default:s}}function r(s){(0,n.default)(1,arguments);var i=1,u=(0,a.default)(s),c=u.getUTCDay(),d=(c<i?7:0)+c-i;return u.setUTCDate(u.getUTCDate()-d),u.setUTCHours(0,0,0,0),u}e.exports=t.default})(Xe,Xe.exports);var Tt=Xe.exports,Ze={exports:{}},Ke={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(V),n=r(Tt),o=r(k);function r(i){return i&&i.__esModule?i:{default:i}}function s(i){(0,o.default)(1,arguments);var u=(0,a.default)(i),c=u.getUTCFullYear(),d=new Date(0);d.setUTCFullYear(c+1,0,4),d.setUTCHours(0,0,0,0);var _=(0,n.default)(d),w=new Date(0);w.setUTCFullYear(c,0,4),w.setUTCHours(0,0,0,0);var m=(0,n.default)(w);return u.getTime()>=_.getTime()?c+1:u.getTime()>=m.getTime()?c:c-1}e.exports=t.default})(Ke,Ke.exports);var ga=Ke.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(ga),n=r(Tt),o=r(k);function r(i){return i&&i.__esModule?i:{default:i}}function s(i){(0,o.default)(1,arguments);var u=(0,a.default)(i),c=new Date(0);c.setUTCFullYear(u,0,4),c.setUTCHours(0,0,0,0);var d=(0,n.default)(c);return d}e.exports=t.default})(Ze,Ze.exports);var cs=Ze.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=s(V),n=s(Tt),o=s(cs),r=s(k);function s(c){return c&&c.__esModule?c:{default:c}}var i=6048e5;function u(c){(0,r.default)(1,arguments);var d=(0,a.default)(c),_=(0,n.default)(d).getTime()-(0,o.default)(d).getTime();return Math.round(_/i)+1}e.exports=t.default})(Ge,Ge.exports);var ds=Ge.exports,Qe={exports:{}},je={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(ae),n=r(V),o=r(k);function r(i){return i&&i.__esModule?i:{default:i}}function s(i,u){(0,o.default)(1,arguments);var c=u||{},d=c.locale,_=d&&d.options&&d.options.weekStartsOn,w=_==null?0:(0,a.default)(_),m=c.weekStartsOn==null?w:(0,a.default)(c.weekStartsOn);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var M=(0,n.default)(i),v=M.getUTCDay(),l=(v<m?7:0)+v-m;return M.setUTCDate(M.getUTCDate()-l),M.setUTCHours(0,0,0,0),M}e.exports=t.default})(je,je.exports);var Mt=je.exports,Je={exports:{}},et={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=s(ae),n=s(V),o=s(Mt),r=s(k);function s(u){return u&&u.__esModule?u:{default:u}}function i(u,c){(0,r.default)(1,arguments);var d=(0,n.default)(u,c),_=d.getUTCFullYear(),w=c||{},m=w.locale,M=m&&m.options&&m.options.firstWeekContainsDate,v=M==null?1:(0,a.default)(M),l=w.firstWeekContainsDate==null?v:(0,a.default)(w.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(_+1,0,l),f.setUTCHours(0,0,0,0);var p=(0,o.default)(f,c),g=new Date(0);g.setUTCFullYear(_,0,l),g.setUTCHours(0,0,0,0);var h=(0,o.default)(g,c);return d.getTime()>=p.getTime()?_+1:d.getTime()>=h.getTime()?_:_-1}e.exports=t.default})(et,et.exports);var pa=et.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=s(ae),n=s(pa),o=s(Mt),r=s(k);function s(u){return u&&u.__esModule?u:{default:u}}function i(u,c){(0,r.default)(1,arguments);var d=c||{},_=d.locale,w=_&&_.options&&_.options.firstWeekContainsDate,m=w==null?1:(0,a.default)(w),M=d.firstWeekContainsDate==null?m:(0,a.default)(d.firstWeekContainsDate),v=(0,n.default)(u,c),l=new Date(0);l.setUTCFullYear(v,0,M),l.setUTCHours(0,0,0,0);var f=(0,o.default)(l,c);return f}e.exports=t.default})(Je,Je.exports);var fs=Je.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=s(V),n=s(Mt),o=s(fs),r=s(k);function s(c){return c&&c.__esModule?c:{default:c}}var i=6048e5;function u(c,d){(0,r.default)(1,arguments);var _=(0,a.default)(c),w=(0,n.default)(_,d).getTime()-(0,o.default)(_,d).getTime();return Math.round(w/i)+1}e.exports=t.default})(Qe,Qe.exports);var gs=Qe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(us),n=c(ls),o=c(ds),r=c(ga),s=c(gs),i=c(pa),u=c(fa);function c(l){return l&&l.__esModule?l:{default:l}}var d={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_={G:function(l,f,p){var g=l.getUTCFullYear()>0?1:0;switch(f){case"G":case"GG":case"GGG":return p.era(g,{width:"abbreviated"});case"GGGGG":return p.era(g,{width:"narrow"});case"GGGG":default:return p.era(g,{width:"wide"})}},y:function(l,f,p){if(f==="yo"){var g=l.getUTCFullYear(),h=g>0?g:1-g;return p.ordinalNumber(h,{unit:"year"})}return a.default.y(l,f)},Y:function(l,f,p,g){var h=(0,i.default)(l,g),b=h>0?h:1-h;if(f==="YY"){var L=b%100;return(0,u.default)(L,2)}return f==="Yo"?p.ordinalNumber(b,{unit:"year"}):(0,u.default)(b,f.length)},R:function(l,f){var p=(0,r.default)(l);return(0,u.default)(p,f.length)},u:function(l,f){var p=l.getUTCFullYear();return(0,u.default)(p,f.length)},Q:function(l,f,p){var g=Math.ceil((l.getUTCMonth()+1)/3);switch(f){case"Q":return String(g);case"QQ":return(0,u.default)(g,2);case"Qo":return p.ordinalNumber(g,{unit:"quarter"});case"QQQ":return p.quarter(g,{width:"abbreviated",context:"formatting"});case"QQQQQ":return p.quarter(g,{width:"narrow",context:"formatting"});case"QQQQ":default:return p.quarter(g,{width:"wide",context:"formatting"})}},q:function(l,f,p){var g=Math.ceil((l.getUTCMonth()+1)/3);switch(f){case"q":return String(g);case"qq":return(0,u.default)(g,2);case"qo":return p.ordinalNumber(g,{unit:"quarter"});case"qqq":return p.quarter(g,{width:"abbreviated",context:"standalone"});case"qqqqq":return p.quarter(g,{width:"narrow",context:"standalone"});case"qqqq":default:return p.quarter(g,{width:"wide",context:"standalone"})}},M:function(l,f,p){var g=l.getUTCMonth();switch(f){case"M":case"MM":return a.default.M(l,f);case"Mo":return p.ordinalNumber(g+1,{unit:"month"});case"MMM":return p.month(g,{width:"abbreviated",context:"formatting"});case"MMMMM":return p.month(g,{width:"narrow",context:"formatting"});case"MMMM":default:return p.month(g,{width:"wide",context:"formatting"})}},L:function(l,f,p){var g=l.getUTCMonth();switch(f){case"L":return String(g+1);case"LL":return(0,u.default)(g+1,2);case"Lo":return p.ordinalNumber(g+1,{unit:"month"});case"LLL":return p.month(g,{width:"abbreviated",context:"standalone"});case"LLLLL":return p.month(g,{width:"narrow",context:"standalone"});case"LLLL":default:return p.month(g,{width:"wide",context:"standalone"})}},w:function(l,f,p,g){var h=(0,s.default)(l,g);return f==="wo"?p.ordinalNumber(h,{unit:"week"}):(0,u.default)(h,f.length)},I:function(l,f,p){var g=(0,o.default)(l);return f==="Io"?p.ordinalNumber(g,{unit:"week"}):(0,u.default)(g,f.length)},d:function(l,f,p){return f==="do"?p.ordinalNumber(l.getUTCDate(),{unit:"date"}):a.default.d(l,f)},D:function(l,f,p){var g=(0,n.default)(l);return f==="Do"?p.ordinalNumber(g,{unit:"dayOfYear"}):(0,u.default)(g,f.length)},E:function(l,f,p){var g=l.getUTCDay();switch(f){case"E":case"EE":case"EEE":return p.day(g,{width:"abbreviated",context:"formatting"});case"EEEEE":return p.day(g,{width:"narrow",context:"formatting"});case"EEEEEE":return p.day(g,{width:"short",context:"formatting"});case"EEEE":default:return p.day(g,{width:"wide",context:"formatting"})}},e:function(l,f,p,g){var h=l.getUTCDay(),b=(h-g.weekStartsOn+8)%7||7;switch(f){case"e":return String(b);case"ee":return(0,u.default)(b,2);case"eo":return p.ordinalNumber(b,{unit:"day"});case"eee":return p.day(h,{width:"abbreviated",context:"formatting"});case"eeeee":return p.day(h,{width:"narrow",context:"formatting"});case"eeeeee":return p.day(h,{width:"short",context:"formatting"});case"eeee":default:return p.day(h,{width:"wide",context:"formatting"})}},c:function(l,f,p,g){var h=l.getUTCDay(),b=(h-g.weekStartsOn+8)%7||7;switch(f){case"c":return String(b);case"cc":return(0,u.default)(b,f.length);case"co":return p.ordinalNumber(b,{unit:"day"});case"ccc":return p.day(h,{width:"abbreviated",context:"standalone"});case"ccccc":return p.day(h,{width:"narrow",context:"standalone"});case"cccccc":return p.day(h,{width:"short",context:"standalone"});case"cccc":default:return p.day(h,{width:"wide",context:"standalone"})}},i:function(l,f,p){var g=l.getUTCDay(),h=g===0?7:g;switch(f){case"i":return String(h);case"ii":return(0,u.default)(h,f.length);case"io":return p.ordinalNumber(h,{unit:"day"});case"iii":return p.day(g,{width:"abbreviated",context:"formatting"});case"iiiii":return p.day(g,{width:"narrow",context:"formatting"});case"iiiiii":return p.day(g,{width:"short",context:"formatting"});case"iiii":default:return p.day(g,{width:"wide",context:"formatting"})}},a:function(l,f,p){var g=l.getUTCHours(),h=g/12>=1?"pm":"am";switch(f){case"a":case"aa":return p.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"aaa":return p.dayPeriod(h,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return p.dayPeriod(h,{width:"narrow",context:"formatting"});case"aaaa":default:return p.dayPeriod(h,{width:"wide",context:"formatting"})}},b:function(l,f,p){var g=l.getUTCHours(),h;switch(g===12?h=d.noon:g===0?h=d.midnight:h=g/12>=1?"pm":"am",f){case"b":case"bb":return p.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"bbb":return p.dayPeriod(h,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return p.dayPeriod(h,{width:"narrow",context:"formatting"});case"bbbb":default:return p.dayPeriod(h,{width:"wide",context:"formatting"})}},B:function(l,f,p){var g=l.getUTCHours(),h;switch(g>=17?h=d.evening:g>=12?h=d.afternoon:g>=4?h=d.morning:h=d.night,f){case"B":case"BB":case"BBB":return p.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"BBBBB":return p.dayPeriod(h,{width:"narrow",context:"formatting"});case"BBBB":default:return p.dayPeriod(h,{width:"wide",context:"formatting"})}},h:function(l,f,p){if(f==="ho"){var g=l.getUTCHours()%12;return g===0&&(g=12),p.ordinalNumber(g,{unit:"hour"})}return a.default.h(l,f)},H:function(l,f,p){return f==="Ho"?p.ordinalNumber(l.getUTCHours(),{unit:"hour"}):a.default.H(l,f)},K:function(l,f,p){var g=l.getUTCHours()%12;return f==="Ko"?p.ordinalNumber(g,{unit:"hour"}):(0,u.default)(g,f.length)},k:function(l,f,p){var g=l.getUTCHours();return g===0&&(g=24),f==="ko"?p.ordinalNumber(g,{unit:"hour"}):(0,u.default)(g,f.length)},m:function(l,f,p){return f==="mo"?p.ordinalNumber(l.getUTCMinutes(),{unit:"minute"}):a.default.m(l,f)},s:function(l,f,p){return f==="so"?p.ordinalNumber(l.getUTCSeconds(),{unit:"second"}):a.default.s(l,f)},S:function(l,f){return a.default.S(l,f)},X:function(l,f,p,g){var h=g._originalDate||l,b=h.getTimezoneOffset();if(b===0)return"Z";switch(f){case"X":return m(b);case"XXXX":case"XX":return M(b);case"XXXXX":case"XXX":default:return M(b,":")}},x:function(l,f,p,g){var h=g._originalDate||l,b=h.getTimezoneOffset();switch(f){case"x":return m(b);case"xxxx":case"xx":return M(b);case"xxxxx":case"xxx":default:return M(b,":")}},O:function(l,f,p,g){var h=g._originalDate||l,b=h.getTimezoneOffset();switch(f){case"O":case"OO":case"OOO":return"GMT"+w(b,":");case"OOOO":default:return"GMT"+M(b,":")}},z:function(l,f,p,g){var h=g._originalDate||l,b=h.getTimezoneOffset();switch(f){case"z":case"zz":case"zzz":return"GMT"+w(b,":");case"zzzz":default:return"GMT"+M(b,":")}},t:function(l,f,p,g){var h=g._originalDate||l,b=Math.floor(h.getTime()/1e3);return(0,u.default)(b,f.length)},T:function(l,f,p,g){var h=g._originalDate||l,b=h.getTime();return(0,u.default)(b,f.length)}};function w(l,f){var p=l>0?"-":"+",g=Math.abs(l),h=Math.floor(g/60),b=g%60;if(b===0)return p+String(h);var L=f;return p+String(h)+L+(0,u.default)(b,2)}function m(l,f){if(l%60===0){var p=l>0?"-":"+";return p+(0,u.default)(Math.abs(l)/60,2)}return M(l,f)}function M(l,f){var p=f||"",g=l>0?"-":"+",h=Math.abs(l),b=(0,u.default)(Math.floor(h/60),2),L=(0,u.default)(h%60,2);return g+b+p+L}var v=_;t.default=v,e.exports=t.default})(Be,Be.exports);var ps=Be.exports,tt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function a(i,u){switch(i){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}}function n(i,u){switch(i){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}}function o(i,u){var c=i.match(/(P+)(p+)?/),d=c[1],_=c[2];if(!_)return a(i,u);var w;switch(d){case"P":w=u.dateTime({width:"short"});break;case"PP":w=u.dateTime({width:"medium"});break;case"PPP":w=u.dateTime({width:"long"});break;case"PPPP":default:w=u.dateTime({width:"full"});break}return w.replace("{{date}}",a(d,u)).replace("{{time}}",n(_,u))}var r={p:n,P:o},s=r;t.default=s,e.exports=t.default})(tt,tt.exports);var hs=tt.exports,at={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){var o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return o.setUTCFullYear(n.getFullYear()),n.getTime()-o.getTime()}e.exports=t.default})(at,at.exports);var ha=at.exports,de={};Object.defineProperty(de,"__esModule",{value:!0});de.isProtectedDayOfYearToken=_s;de.isProtectedWeekYearToken=ws;de.throwProtectedError=Cs;var vs=["D","DD"],ms=["YY","YYYY"];function _s(e){return vs.indexOf(e)!==-1}function ws(e){return ms.indexOf(e)!==-1}function Cs(e,t,a){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"))}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var a=w(Zr),n=w(ss),o=w(is),r=w(V),s=w(ps),i=w(hs),u=w(ha),c=de,d=w(ae),_=w(k);function w(h){return h&&h.__esModule?h:{default:h}}var m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v=/^'([^]*?)'?$/,l=/''/g,f=/[a-zA-Z]/;function p(h,b,L){(0,_.default)(2,arguments);var Q=String(b),T=L||{},C=T.locale||n.default,y=C.options&&C.options.firstWeekContainsDate,E=y==null?1:(0,d.default)(y),x=T.firstWeekContainsDate==null?E:(0,d.default)(T.firstWeekContainsDate);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=C.options&&C.options.weekStartsOn,q=U==null?0:(0,d.default)(U),j=T.weekStartsOn==null?q:(0,d.default)(T.weekStartsOn);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var Y=(0,r.default)(h);if(!(0,a.default)(Y))throw new RangeError("Invalid time value");var re=(0,u.default)(Y),J=(0,o.default)(Y,re),G={firstWeekContainsDate:x,weekStartsOn:j,locale:C,_originalDate:Y},Ma=Q.match(M).map(function(W){var ee=W[0];if(ee==="p"||ee==="P"){var ge=i.default[ee];return ge(W,C.formatLong,G)}return W}).join("").match(m).map(function(W){if(W==="''")return"'";var ee=W[0];if(ee==="'")return g(W);var ge=s.default[ee];if(ge)return!T.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(W)&&(0,c.throwProtectedError)(W,b,h),!T.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(W)&&(0,c.throwProtectedError)(W,b,h),ge(J,W,C.localize,G);if(ee.match(f))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ee+"`");return W}).join("");return Ma}function g(h){return h.match(v)[1].replace(l,"'")}e.exports=t.default})(xe,xe.exports);var ys=xe.exports,nt={exports:{}},rt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(s,i,u){var c=r(s,u.timeZone,u.locale);return c.formatToParts?n(c,i):o(c,i)}function n(s,i){for(var u=s.formatToParts(i),c=u.length-1;c>=0;--c)if(u[c].type==="timeZoneName")return u[c].value}function o(s,i){var u=s.format(i).replace(/\u200E/g,""),c=/ [\w-+ ]+$/.exec(u);return c?c[0].substr(1):""}function r(s,i,u){if(u&&!u.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(u?[u.code,"en-US"]:void 0,{timeZone:i,timeZoneName:s})}e.exports=t.default})(rt,rt.exports);var Ts=rt.exports,st={exports:{}},ot={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(u,c){var d=i(c);return d.formatToParts?o(d,u):r(d,u)}var n={year:0,month:1,day:2,hour:3,minute:4,second:5};function o(u,c){try{for(var d=u.formatToParts(c),_=[],w=0;w<d.length;w++){var m=n[d[w].type];m>=0&&(_[m]=parseInt(d[w].value,10))}return _}catch(M){if(M instanceof RangeError)return[NaN];throw M}}function r(u,c){var d=u.format(c).replace(/\u200E/g,""),_=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(d);return[_[3],_[1],_[2],_[4],_[5],_[6]]}var s={};function i(u){if(!s[u]){var c=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),d=c==="06/25/2014, 00:00:00"||c==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";s[u]=d?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return s[u]}e.exports=t.default})(ot,ot.exports);var Ms=ot.exports,it={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,o,r,s,i,u,c){var d=new Date(0);return d.setUTCFullYear(n,o,r),d.setUTCHours(s,i,u,c),d}e.exports=t.default})(it,it.exports);var va=it.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=o(Ms),n=o(va);function o(v){return v&&v.__esModule?v:{default:v}}var r=36e5,s=6e4,i={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function u(v,l,f){var p,g;if(!v||(p=i.timezoneZ.exec(v),p))return 0;var h;if(p=i.timezoneHH.exec(v),p)return h=parseInt(p[1],10),w(h)?-(h*r):NaN;if(p=i.timezoneHHMM.exec(v),p){h=parseInt(p[1],10);var b=parseInt(p[2],10);return w(h,b)?(g=Math.abs(h)*r+b*s,h>0?-g:g):NaN}if(M(v)){l=new Date(l||Date.now());var L=f?l:c(l),Q=d(L,v),T=f?Q:_(l,Q,v);return-T}return NaN}function c(v){return(0,n.default)(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds())}function d(v,l){var f=(0,a.default)(v,l),p=(0,n.default)(f[0],f[1]-1,f[2],f[3]%24,f[4],f[5],0).getTime(),g=v.getTime(),h=g%1e3;return g-=h>=0?h:1e3+h,p-g}function _(v,l,f){var p=v.getTime(),g=p-l,h=d(new Date(g),f);if(l===h)return l;g-=h-l;var b=d(new Date(g),f);return h===b?h:Math.max(h,b)}function w(v,l){return-23<=v&&v<=23&&(l==null||0<=l&&l<=59)}var m={};function M(v){if(m[v])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:v}),m[v]=!0,!0}catch{return!1}}e.exports=t.default})(st,st.exports);var fe=st.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(Ts),n=o(fe);function o(m){return m&&m.__esModule?m:{default:m}}var r=60*1e3,s={X:function(m,M,v,l){var f=i(l.timeZone,l._originalDate||m);if(f===0)return"Z";switch(M){case"X":return d(f);case"XXXX":case"XX":return c(f);case"XXXXX":case"XXX":default:return c(f,":")}},x:function(m,M,v,l){var f=i(l.timeZone,l._originalDate||m);switch(M){case"x":return d(f);case"xxxx":case"xx":return c(f);case"xxxxx":case"xxx":default:return c(f,":")}},O:function(m,M,v,l){var f=i(l.timeZone,l._originalDate||m);switch(M){case"O":case"OO":case"OOO":return"GMT"+_(f,":");case"OOOO":default:return"GMT"+c(f,":")}},z:function(m,M,v,l){var f=l._originalDate||m;switch(M){case"z":case"zz":case"zzz":return(0,a.default)("short",f,l);case"zzzz":default:return(0,a.default)("long",f,l)}}};function i(m,M){var v=m?(0,n.default)(m,M,!0)/r:M.getTimezoneOffset();if(Number.isNaN(v))throw new RangeError("Invalid time zone specified: "+m);return v}function u(m,M){for(var v=m<0?"-":"",l=Math.abs(m).toString();l.length<M;)l="0"+l;return v+l}function c(m,M){var v=M||"",l=m>0?"-":"+",f=Math.abs(m),p=u(Math.floor(f/60),2),g=u(Math.floor(f%60),2);return l+p+v+g}function d(m,M){if(m%60===0){var v=m>0?"-":"+";return v+u(Math.abs(m)/60,2)}return c(m,M)}function _(m,M){var v=m>0?"-":"+",l=Math.abs(m),f=Math.floor(l/60),p=l%60;if(p===0)return v+String(f);var g=M;return v+String(f)+g+u(p,2)}var w=s;t.default=w,e.exports=t.default})(nt,nt.exports);var bs=nt.exports,ut={exports:{}},lt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,n=a;t.default=n,e.exports=t.default})(lt,lt.exports);var ma=lt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var a=s(ae),n=s(ha),o=s(fe),r=s(ma);function s(T){return T&&T.__esModule?T:{default:T}}var i=36e5,u=6e4,c=2,d={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:r.default};function _(T,C){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(T===null)return new Date(NaN);var y=C||{},E=y.additionalDigits==null?c:(0,a.default)(y.additionalDigits);if(E!==2&&E!==1&&E!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(T instanceof Date||typeof T=="object"&&Object.prototype.toString.call(T)==="[object Date]")return new Date(T.getTime());if(typeof T=="number"||Object.prototype.toString.call(T)==="[object Number]")return new Date(T);if(!(typeof T=="string"||Object.prototype.toString.call(T)==="[object String]"))return new Date(NaN);var x=w(T),U=m(x.date,E),q=U.year,j=U.restDateString,Y=M(j,q);if(isNaN(Y))return new Date(NaN);if(Y){var re=Y.getTime(),J=0,G;if(x.time&&(J=v(x.time),isNaN(J)))return new Date(NaN);if(x.timeZone||y.timeZone){if(G=(0,o.default)(x.timeZone||y.timeZone,new Date(re+J)),isNaN(G))return new Date(NaN)}else G=(0,n.default)(new Date(re+J)),G=(0,n.default)(new Date(re+J+G));return new Date(re+J+G)}else return new Date(NaN)}function w(T){var C={},y=d.dateTimePattern.exec(T),E;if(y?(C.date=y[1],E=y[3]):(y=d.datePattern.exec(T),y?(C.date=y[1],E=y[2]):(C.date=null,E=T)),E){var x=d.timeZone.exec(E);x?(C.time=E.replace(x[1],""),C.timeZone=x[1].trim()):C.time=E}return C}function m(T,C){var y=d.YYY[C],E=d.YYYYY[C],x;if(x=d.YYYY.exec(T)||E.exec(T),x){var U=x[1];return{year:parseInt(U,10),restDateString:T.slice(U.length)}}if(x=d.YY.exec(T)||y.exec(T),x){var q=x[1];return{year:parseInt(q,10)*100,restDateString:T.slice(q.length)}}return{year:null}}function M(T,C){if(C===null)return null;var y,E,x,U;if(T.length===0)return E=new Date(0),E.setUTCFullYear(C),E;if(y=d.MM.exec(T),y)return E=new Date(0),x=parseInt(y[1],10)-1,h(C,x)?(E.setUTCFullYear(C,x),E):new Date(NaN);if(y=d.DDD.exec(T),y){E=new Date(0);var q=parseInt(y[1],10);return b(C,q)?(E.setUTCFullYear(C,0,q),E):new Date(NaN)}if(y=d.MMDD.exec(T),y){E=new Date(0),x=parseInt(y[1],10)-1;var j=parseInt(y[2],10);return h(C,x,j)?(E.setUTCFullYear(C,x,j),E):new Date(NaN)}if(y=d.Www.exec(T),y)return U=parseInt(y[1],10)-1,L(C,U)?l(C,U):new Date(NaN);if(y=d.WwwD.exec(T),y){U=parseInt(y[1],10)-1;var Y=parseInt(y[2],10)-1;return L(C,U,Y)?l(C,U,Y):new Date(NaN)}return null}function v(T){var C,y,E;if(C=d.HH.exec(T),C)return y=parseFloat(C[1].replace(",",".")),Q(y)?y%24*i:NaN;if(C=d.HHMM.exec(T),C)return y=parseInt(C[1],10),E=parseFloat(C[2].replace(",",".")),Q(y,E)?y%24*i+E*u:NaN;if(C=d.HHMMSS.exec(T),C){y=parseInt(C[1],10),E=parseInt(C[2],10);var x=parseFloat(C[3].replace(",","."));return Q(y,E,x)?y%24*i+E*u+x*1e3:NaN}return null}function l(T,C,y){C=C||0,y=y||0;var E=new Date(0);E.setUTCFullYear(T,0,4);var x=E.getUTCDay()||7,U=C*7+y+1-x;return E.setUTCDate(E.getUTCDate()+U),E}var f=[31,28,31,30,31,30,31,31,30,31,30,31],p=[31,29,31,30,31,30,31,31,30,31,30,31];function g(T){return T%400===0||T%4===0&&T%100!==0}function h(T,C,y){if(C<0||C>11)return!1;if(y!=null){if(y<1)return!1;var E=g(T);if(E&&y>p[C]||!E&&y>f[C])return!1}return!0}function b(T,C){if(C<1)return!1;var y=g(T);return!(y&&C>366||!y&&C>365)}function L(T,C,y){return!(C<0||C>52||y!=null&&(y<0||y>6))}function Q(T,C,y){return!(T!=null&&(T<0||T>=25)||C!=null&&(C<0||C>=60)||y!=null&&(y<0||y>=60))}e.exports=t.default})(ut,ut.exports);var we=ut.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(ys),n=r(bs),o=r(we);function r(u){return u&&u.__esModule?u:{default:u}}var s=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function i(u,c,d){var _=String(c),w=d||{},m=_.match(s);if(m){var M=(0,o.default)(u,w);_=m.reduce(function(v,l){if(l[0]==="'")return v;var f=v.indexOf(l),p=v[f-1]==="'",g=v.replace(l,"'"+n.default[l[0]](M,l,null,w)+"'");return p?g.substring(0,f-1)+g.substring(f+1):g},_)}return(0,a.default)(u,_,w)}e.exports=t.default})(Ee,Ee.exports);var _a=Ee.exports,ct={exports:{}},dt={exports:{}},ft={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,o){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");o=o||{};for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r]);return n}e.exports=t.default})(ft,ft.exports);var Es=ft.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(Es);function n(r){return r&&r.__esModule?r:{default:r}}function o(r){return(0,a.default)({},r)}e.exports=t.default})(dt,dt.exports);var wa=dt.exports,gt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=o(fe),n=o(we);function o(s){return s&&s.__esModule?s:{default:s}}function r(s,i,u){var c=(0,n.default)(s,u),d=(0,a.default)(i,c,!0),_=new Date(c.getTime()-d),w=new Date(0);return w.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),w.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),w}e.exports=t.default})(gt,gt.exports);var Ca=gt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(wa),n=r(_a),o=r(Ca);function r(i){return i&&i.__esModule?i:{default:i}}function s(i,u,c,d){var _=(0,a.default)(d);return _.timeZone=u,(0,n.default)((0,o.default)(i,u),c,_)}e.exports=t.default})(ct,ct.exports);var xs=ct.exports,pt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(fe);function n(r){return r&&r.__esModule?r:{default:r}}function o(r,s){return-(0,a.default)(r,s)}e.exports=t.default})(pt,pt.exports);var Os=pt.exports,ht={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(wa),n=i(we),o=i(ma),r=i(fe),s=i(va);function i(c){return c&&c.__esModule?c:{default:c}}function u(c,d,_){if(typeof c=="string"&&!c.match(o.default)){var w=(0,a.default)(_);return w.timeZone=d,(0,n.default)(c,w)}var m=(0,n.default)(c,_),M=(0,s.default)(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()).getTime(),v=(0,r.default)(d,new Date(M));return new Date(M+v)}e.exports=t.default})(ht,ht.exports);var Ds=ht.exports,Ht={format:_a,formatInTimeZone:xs,getTimezoneOffset:Os,toDate:we,utcToZonedTime:Ca,zonedTimeToUtc:Ds};const Yt=7,As=60,$t=24*60,ce=(e,t)=>{const a=e instanceof Date?e.toISOString():e;try{return Ht.utcToZonedTime(a,t)}catch{const o=Intl.DateTimeFormat().resolvedOptions().timeZone;return console.warn(`Invalid timezone: ${t}, falling back to user timezone: ${o}`),Ht.utcToZonedTime(a,o)}},oe=(e=0,t=0)=>e*As+t,Ss=(e,t,a)=>{const o=ce(e,t).getDay();return a.find(r=>r.dayOfWeek===o)||null},Us=(e,t,a)=>a<=t?e>=t||e<a:e>=t&&e<a,Is=e=>new Map((e||[]).filter(t=>!t.closedAllDay).map(t=>[t.dayOfWeek,t])),Ps=(e,t,a)=>{const n=a.get(e);if(!n||n.openAllDay)return null;const o=oe(n.openHour??0,n.openMinutes??0);return t<o?{config:n,minutesUntilOpen:o-t,daysUntilOpen:0,dayOfWeek:e}:null},Ns=(e,t,a)=>Array.from({length:Yt},(n,o)=>o+1).map(n=>{const o=(e+n)%Yt,r=a.get(o);if(!r)return null;const s=r.openAllDay?0:oe(r.openHour??0,r.openMinutes??0),i=$t-t+(n-1)*$t+s;return{config:r,minutesUntilOpen:i,daysUntilOpen:n,dayOfWeek:o}}).find(Boolean)||null,ks=(e,t,a)=>{if(!a)return null;const n=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t===n)return a;const o=e instanceof Date?e:new Date(e),r=new Date(o.getTime()+a.minutesUntilOpen*6e4),s=ce(r,n),i=ce(o,n),u=new Date(s);u.setHours(0,0,0,0);const c=new Date(i);c.setHours(0,0,0,0);const d=Math.round((u-c)/864e5);return{...a,config:{...a.config,openHour:s.getHours(),openMinutes:s.getMinutes(),dayOfWeek:s.getDay()},daysUntilOpen:d,dayOfWeek:s.getDay()}},ya=(e,t,a=[])=>{if(!a.length)return!1;const n=Ss(e,t,a);if(!n)return!1;if(n.openAllDay)return!0;if(n.closedAllDay)return!1;const o=ce(e,t),r=oe(o.getHours(),o.getMinutes()),s=oe(n.openHour??0,n.openMinutes??0),i=oe(n.closeHour??0,n.closeMinutes??0);return Us(r,s,i)},Ws=(e,t,a=[])=>{const n=ce(e,t),o=n.getDay(),r=oe(n.getHours(),n.getMinutes()),s=Is(a);if(s.size===0)return null;const u=Ps(o,r,s)||Ns(o,r,s);return ks(e,t,u)},Fs=(e,t,a,n,o)=>e?ya(t,a,n)&&o:o,Bt="UTC",Rs="in_a_few_minutes";function bt(e=[]){const t=Gt(e),a=S(()=>window.chatwootWebChannel||{}),n=S(()=>{var u;return{workingHours:((u=a.value.workingHours)==null?void 0:u.map(Qa))||[],workingHoursEnabled:a.value.workingHoursEnabled||!1,timezone:a.value.timezone||Bt,utcOffset:a.value.utcOffset||a.value.timezone||Bt,replyTime:a.value.replyTime||Rs}}),o=S(()=>new Date),r=S(()=>{const u=t.value||[];return Array.isArray(u)?u.length>0:!1}),s=S(()=>ya(o.value,n.value.utcOffset,n.value.workingHours)),i=S(()=>Fs(n.value.workingHoursEnabled,o.value,n.value.utcOffset,n.value.workingHours,r.value));return{channelConfig:a,inboxConfig:n,currentTime:o,availableAgents:t,hasOnlineAgents:r,isOnline:i,isInWorkingHours:s}}const Ls={name:"App",components:{Spinner:Ua},mixins:[yt],setup(){const{prefersDarkMode:e}=Xr(),t=Kt(),{isInWorkingHours:a}=bt();return{prefersDarkMode:e,router:t,isInWorkingHours:a}},data(){return{isMobile:!1,campaignsSnoozedTill:void 0}},computed:{...vt({activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize",hideMessageBubble:"appConfig/getHideMessageBubble",isFetchingList:"conversation/getIsFetchingList",isRightAligned:"appConfig/isRightAligned",isWidgetOpen:"appConfig/getIsWidgetOpen",messageCount:"conversation/getMessageCount",unreadMessageCount:"conversation/getUnreadMessageCount",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat",showUnreadMessagesDialog:"appConfig/getShowUnreadMessagesDialog"}),isIFrame(){return P.isIFrame()},isRNWebView(){return le.isRNWebView()},isRTL(){return this.$root.$i18n.locale?rn(this.$root.$i18n.locale):!1}},watch:{activeCampaign(){this.setCampaignView()},isRTL:{immediate:!0,handler(e){document.documentElement.dir=e?"rtl":"ltr"}}},mounted(){const{websiteToken:e,locale:t,widgetColor:a}=window.chatwootWebChannel;this.setLocale(t),this.setWidgetColor(a),Jt(window.authToken),this.isIFrame?(this.registerListeners(),this.sendLoadedEvent()):(this.fetchOldConversations(),this.fetchAvailableAgents(e),this.setLocale(Ra(window.location.search))),this.isRNWebView&&(this.registerListeners(),this.sendRNWebViewLoadedEvent()),this.$store.dispatch("conversationAttributes/getAttributes"),this.registerUnreadEvents(),this.registerCampaignEvents()},methods:{...pe("appConfig",["setAppConfig","setReferrerHost","setWidgetColor","setBubbleVisibility","setColorScheme"]),...pe("conversation",["fetchOldConversations"]),...pe("campaign",["initCampaigns","executeCampaign","resetCampaign"]),...pe("agent",["fetchAvailableAgents"]),scrollConversationToBottom(){const e=this.$el.querySelector(".conversation-wrap");e.scrollTop=e.scrollHeight},setBubbleLabel(){P.sendMessage({event:"setBubbleLabel",label:this.$t("BUBBLE.LABEL")})},setIframeHeight(e){this.$nextTick(()=>{const t=$r();P.sendMessage({event:"updateIframeHeight",isFixedHeight:e,extraHeight:t})})},setLocale(e){if(!e)return;const{enabledLanguages:t}=window.chatwootWebChannel,a=e.split("_")[0],n=t.some(r=>r.iso_639_1_code===a);t.some(r=>r.iso_639_1_code===e)?this.$root.$i18n.locale=e:n&&(this.$root.$i18n.locale=a)},registerUnreadEvents(){Z.on(da,()=>{const{name:e}=this.$route;(this.isWidgetOpen||!this.isIFrame)&&e==="messages"&&this.$store.dispatch("conversation/setUserLastSeen"),this.setUnreadView()}),Z.on(er,()=>{this.router.replace({name:"messages"}).then(()=>this.unsetUnreadView())})},registerCampaignEvents(){Z.on(tr,()=>{this.shouldShowPreChatForm?this.router.replace({name:"prechat-form"}):(this.router.replace({name:"messages"}),Z.emit("execute-campaign",{campaignId:this.activeCampaign.id})),this.unsetUnreadView()}),Z.on("execute-campaign",e=>{const{customAttributes:t,campaignId:a}=e,{websiteToken:n}=window.chatwootWebChannel;this.executeCampaign({campaignId:a,websiteToken:n,customAttributes:t}),this.router.replace({name:"messages"})}),Z.on("snooze-campaigns",()=>{const e=Fa(new Date,1);this.campaignsSnoozedTill=Number(e)})},setCampaignView(){const{messageCount:e,activeCampaign:t}=this,a=this.campaignsSnoozedTill&&this.campaignsSnoozedTill>Date.now(),n=!In(t)&&!e&&!a;this.isIFrame&&n&&this.router.replace({name:"campaigns"}).then(()=>{this.setIframeHeight(!0),P.sendMessage({event:"setUnreadMode"})})},setUnreadView(){const{unreadMessageCount:e}=this;this.showUnreadMessagesDialog?this.isIFrame&&e>0&&!this.isWidgetOpen&&(this.router.replace({name:"unread-messages"}).then(()=>{this.setIframeHeight(!0),P.sendMessage({event:"setUnreadMode"})}),this.handleUnreadNotificationDot()):this.handleUnreadNotificationDot()},unsetUnreadView(){this.isIFrame&&(P.sendMessage({event:"resetUnreadMode"}),this.setIframeHeight(!1),this.handleUnreadNotificationDot())},handleUnreadNotificationDot(){const{unreadMessageCount:e}=this;this.isIFrame&&P.sendMessage({event:"handleNotificationDot",unreadMessageCount:e})},createWidgetEvents(e){const{eventName:t}=e;t==="webwidget.triggered"&&["unread-messages","campaigns"].includes(this.$route.name)||this.$store.dispatch("events/create",{name:t})},registerListeners(){const{websiteToken:e}=window.chatwootWebChannel;window.addEventListener("message",t=>{if(!P.isAValidEvent(t))return;const a=P.getMessage(t);if(a.event==="config-set")this.setLocale(a.locale),this.setBubbleLabel(),this.fetchOldConversations().then(()=>this.setUnreadView()),this.fetchAvailableAgents(e),this.setAppConfig(a),this.$store.dispatch("contacts/get"),this.setCampaignReadData(a.campaignsSnoozedTill);else if(a.event==="widget-visible")this.scrollConversationToBottom();else if(a.event==="change-url"){const{referrerURL:n,referrerHost:o}=a;this.initCampaigns({currentURL:n,websiteToken:e,isInBusinessHours:this.isInWorkingHours}),window.referrerURL=n,this.setReferrerHost(o)}else if(a.event==="toggle-close-button")this.isMobile=a.isMobile;else if(a.event==="push-event")this.createWidgetEvents(a);else if(a.event==="set-label")this.$store.dispatch("conversationLabels/create",a.label);else if(a.event==="remove-label")this.$store.dispatch("conversationLabels/destroy",a.label);else if(a.event==="set-user")this.$store.dispatch("contacts/setUser",a);else if(a.event==="set-custom-attributes")this.$store.dispatch("contacts/setCustomAttributes",a.customAttributes);else if(a.event==="delete-custom-attribute")this.$store.dispatch("contacts/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-conversation-custom-attributes")this.$store.dispatch("conversation/setCustomAttributes",a.customAttributes);else if(a.event==="delete-conversation-custom-attribute")this.$store.dispatch("conversation/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-locale")this.setLocale(a.locale),this.setBubbleLabel();else if(a.event==="set-color-scheme")this.setColorScheme(a.darkMode);else if(a.event==="toggle-open"){this.$store.dispatch("appConfig/toggleWidgetOpen",a.isOpen);const n=["home"].includes(this.$route.name)&&a.isOpen&&this.messageCount,o=!a.isOpen&&["unread-messages","campaigns"].includes(this.$route.name);n&&this.router.replace({name:"messages"}),o&&(this.$store.dispatch("conversation/setUserLastSeen"),this.unsetUnreadView(),this.router.replace({name:"home"})),a.isOpen||this.resetCampaign()}else a.event===Wa&&this.setBubbleVisibility(a.hideMessageBubble)})},sendLoadedEvent(){P.sendMessage(Lt())},sendRNWebViewLoadedEvent(){le.sendMessage(Lt())},setCampaignReadData(e){e&&(this.campaignsSnoozedTill=Number(e))}}};function Hs(e,t,a,n,o,r){const s=te("Spinner"),i=te("router-view");return!e.conversationSize&&e.isFetchingList?(O(),D("div",{key:0,class:z(["flex items-center justify-center flex-1 h-full bg-n-background",{dark:n.prefersDarkMode}])},[R(s,{size:""})],2)):(O(),D("div",{key:1,class:z(["flex flex-col justify-end h-full",{"is-mobile":o.isMobile,"is-widget-right":e.isRightAligned,"is-bubble-hidden":e.hideMessageBubble,"is-flat-design":e.isWidgetStyleFlat,dark:n.prefersDarkMode}])},[R(i)],2))}const Ys=me(Ls,[["render",Hs]]),$s=()=>{P.sendMessage({event:"playAudio"})},zt=(e,t)=>{const{conversation_id:a}=t,n=e["conversationAttributes/getConversationParams"].id;return n&&a!==n};class Et extends ja{constructor(a,n){super(a,n);I(this,"onDisconnected",()=>{this.setLastMessageId()});I(this,"onReconnect",()=>{this.syncLatestMessages()});I(this,"setLastMessageId",()=>{this.app.$store.dispatch("conversation/setLastMessageId")});I(this,"syncLatestMessages",()=>{this.app.$store.dispatch("conversation/syncLatestMessages")});I(this,"onStatusChange",a=>{a.status==="resolved"&&this.app.$store.dispatch("campaign/resetCampaign"),this.app.$store.dispatch("conversationAttributes/update",a)});I(this,"onMessageCreated",a=>{zt(this.app.$store.getters,a)||(this.app.$store.dispatch("conversation/addOrUpdateMessage",a).then(()=>Z.emit(da)),P.sendMessage({event:"onEvent",eventIdentifier:Ot,data:a}),a.sender_type==="User"&&$s())});I(this,"onMessageUpdated",a=>{zt(this.app.$store.getters,a)||(Br(a)&&P.sendMessage({event:"onEvent",eventIdentifier:Ot,data:a}),this.app.$store.dispatch("conversation/addOrUpdateMessage",a))});I(this,"onConversationCreated",()=>{this.app.$store.dispatch("conversationAttributes/getAttributes")});I(this,"onPresenceUpdate",a=>{this.app.$store.dispatch("agent/updatePresence",a.users)});I(this,"onContactMerge",a=>{const{pubsub_token:n}=a;Et.refreshConnector(n)});I(this,"onTypingOn",a=>{const n=this.app.$store.getters["conversationAttributes/getConversationParams"].id;a.conversation&&a.conversation.id!==n||a.is_private||(this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"on"}),this.initTimer())});I(this,"onTypingOff",()=>{this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"off"})});I(this,"clearTimer",()=>{this.CancelTyping&&(clearTimeout(this.CancelTyping),this.CancelTyping=null)});I(this,"initTimer",()=>{this.CancelTyping=setTimeout(()=>{this.onTypingOff()},3e4)});this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.status_changed":this.onStatusChange,"conversation.created":this.onConversationCreated,"presence.update":this.onPresenceUpdate,"contact.merged":this.onContactMerge}}}const Bs={data(){return{showBannerMessage:!1,bannerMessage:"",bannerType:"error"}},mounted(){Z.on(za.SHOW_ALERT,({message:e,type:t="error"})=>{this.bannerMessage=e,this.bannerType=t,this.showBannerMessage=!0,setTimeout(()=>{this.showBannerMessage=!1},3e3)})}};function zs(e,t,a,n,o,r){return o.showBannerMessage?(O(),D("div",{key:0,class:z(`banner ${o.bannerType}`)},[F("span",null,$(o.bannerMessage),1)],2)):H("",!0)}const Vs=me(Bs,[["render",zs],["__scopeId","data-v-604e405a"]]),qs={name:"HeaderActions",components:{FluentIcon:jt},mixins:[yt],props:{showPopoutButton:{type:Boolean,default:!1},showEndConversationButton:{type:Boolean,default:!0}},computed:{...vt({conversationAttributes:"conversationAttributes/getConversationParams",canUserEndConversation:"appConfig/getCanUserEndConversation"}),canLeaveConversation(){return[Ce.OPEN,Ce.SNOOZED,Ce.PENDING].includes(this.conversationStatus)},isIframe(){return P.isIFrame()},isRNWebView(){return le.isRNWebView()},showHeaderActions(){return this.isIframe||this.isRNWebView||this.hasWidgetOptions},conversationStatus(){return this.conversationAttributes.status},hasWidgetOptions(){return this.showPopoutButton||this.conversationStatus==="open"}},methods:{popoutWindow(){this.closeWindow();const{location:{origin:e},chatwootWebChannel:{websiteToken:t},authToken:a}=window;La(e,t,this.$root.$i18n.locale,a)},closeWindow(){P.isIFrame()?P.sendMessage({event:"closeWindow"}):le.isRNWebView&&le.sendMessage({type:"close-widget"})},resolveConversation(){this.$store.dispatch("conversation/resolveConversation")}}},Gs={key:0,class:"actions flex items-center gap-3"},Xs=["title"];function Zs(e,t,a,n,o,r){const s=te("FluentIcon");return r.showHeaderActions?(O(),D("div",Gs,[r.canLeaveConversation&&e.canUserEndConversation&&e.hasEndConversationEnabled&&a.showEndConversationButton?(O(),D("button",{key:0,class:"button transparent compact",title:e.$t("END_CONVERSATION"),onClick:t[0]||(t[0]=(...i)=>r.resolveConversation&&r.resolveConversation(...i))},[R(s,{icon:"sign-out",size:"22",class:"text-n-slate-12"})],8,Xs)):H("",!0),a.showPopoutButton?(O(),D("button",{key:1,class:"button transparent compact new-window--button",onClick:t[1]||(t[1]=(...i)=>r.popoutWindow&&r.popoutWindow(...i))},[R(s,{icon:"open",size:"22",class:"text-n-slate-12"})])):H("",!0),F("button",{class:z(["button transparent compact close-button",{"rn-close-button":r.isRNWebView}]),onClick:t[2]||(t[2]=(...i)=>r.closeWindow&&r.closeWindow(...i))},[R(s,{icon:"dismiss",size:"24",class:"text-n-slate-12"})],2)])):H("",!0)}const Ta=me(qs,[["render",Zs],["__scopeId","data-v-871c3f8e"]]),Ks={class:"flex"},Qs={__name:"GroupedAvatars",props:{users:{type:Array,default:()=>[]},limit:{type:Number,default:4}},setup(e){const t=e,a=S(()=>t.users.slice(0,t.limit));return(n,o)=>(O(),D("div",Ks,[(O(!0),D(B,null,xa(a.value,(r,s)=>(O(),D("span",{key:r.id,class:z([s?"ltr:-ml-4 rtl:-mr-4":"","inline-block rounded-full text-white shadow-solid"])},[R(Ja,{name:r.name,src:r.avatar_url,size:36,class:"[&>span]:outline [&>span]:outline-1 [&>span]:outline-n-background","rounded-full":""},null,8,["name","src"])],2))),128))]))}},Vt=5,js=3,qt=60,Js={__name:"AvailabilityText",props:{time:{type:Date,required:!0},utcOffset:{type:String,required:!0},workingHours:{type:Array,required:!0},workingHoursEnabled:{type:Boolean,required:!0},replyTime:{type:String,default:"in_a_few_minutes"},isOnline:{type:Boolean,required:!0},isInWorkingHours:{type:Boolean,required:!0}},setup(e){const t=e,{t:a}=Zt(),n=S(()=>[a("DAY_NAMES.SUNDAY"),a("DAY_NAMES.MONDAY"),a("DAY_NAMES.TUESDAY"),a("DAY_NAMES.WEDNESDAY"),a("DAY_NAMES.THURSDAY"),a("DAY_NAMES.FRIDAY"),a("DAY_NAMES.SATURDAY")]),o=S(()=>t.workingHours.length?t.workingHours.every(d=>d.closedAllDay):!1),r=S(()=>{const d=`REPLY_TIME.${t.replyTime.toUpperCase()}`;return a(d)}),s=S(()=>{if(!t.workingHoursEnabled||o.value||t.isInWorkingHours&&t.isOnline)return null;const d=Ws(t.time,t.utcOffset,t.workingHours);return d?{...d,hoursUntilOpen:Math.floor(d.minutesUntilOpen/qt),remainingMinutes:d.minutesUntilOpen%qt}:null}),i=S(()=>s.value?Math.ceil(s.value.remainingMinutes/Vt)*Vt:0),u=S(()=>s.value?s.value.remainingMinutes>0?s.value.hoursUntilOpen+1:s.value.hoursUntilOpen:0),c=S(()=>s.value?en(s.value.config.openHour||0,s.value.config.openMinutes||0):"");return(d,_)=>(O(),D("span",null,[e.isInWorkingHours?(O(),D(B,{key:0},[X($(r.value),1)],64)):e.workingHoursEnabled?o.value?(O(),D(B,{key:2},[X($(N(a)("TEAM_AVAILABILITY.BACK_AS_SOON_AS_POSSIBLE")),1)],64)):s.value?s.value.daysUntilOpen===1?(O(),D(B,{key:4},[X($(N(a)("REPLY_TIME.BACK_TOMORROW")),1)],64)):s.value.daysUntilOpen>1?(O(),D(B,{key:5},[X($(N(a)("REPLY_TIME.BACK_ON_DAY",{day:n.value[s.value.config.dayOfWeek]})),1)],64)):s.value.hoursUntilOpen===0?(O(),D(B,{key:6},[X($(N(a)("REPLY_TIME.BACK_IN_MINUTES",{time:`${i.value}`})),1)],64)):s.value.hoursUntilOpen<js?(O(),D(B,{key:7},[X($(N(a)("REPLY_TIME.BACK_IN_HOURS",u.value)),1)],64)):(O(),D(B,{key:8},[X($(N(a)("REPLY_TIME.BACK_AT_TIME",{time:c.value})),1)],64)):(O(),D(B,{key:3},[X($(N(a)("REPLY_TIME.BACK_IN_SOME_TIME")),1)],64)):(O(),D(B,{key:1},[X($(e.isOnline?r.value:N(a)("TEAM_AVAILABILITY.BACK_AS_SOON_AS_POSSIBLE")),1)],64))]))}},eo={class:"flex items-center justify-between gap-2"},to={class:"flex flex-col gap-1"},ao={key:0,class:"font-medium text-n-slate-12"},no={__name:"AvailabilityContainer",props:{agents:{type:Array,default:()=>[]},showHeader:{type:Boolean,default:!0},showAvatars:{type:Boolean,default:!0},textClasses:{type:String,default:""}},setup(e){const t=e,{t:a}=Zt(),n=Me("appConfig/getAvailableMessage"),o=Me("appConfig/getUnavailableMessage"),{currentTime:r,hasOnlineAgents:s,isOnline:i,inboxConfig:u,isInWorkingHours:c}=bt(t.agents),d=S(()=>u.value.workingHours||[]),_=S(()=>u.value.workingHoursEnabled||!1),w=S(()=>u.value.utcOffset||u.value.timezone||"UTC"),m=S(()=>u.value.replyTime||"in_a_few_minutes"),M=S(()=>i.value||_.value&&c.value),v=S(()=>M.value?n.value||a("TEAM_AVAILABILITY.ONLINE"):o.value||a("TEAM_AVAILABILITY.OFFLINE"));return(l,f)=>(O(),D("div",eo,[F("div",to,[e.showHeader?(O(),D("div",ao,$(v.value),1)):H("",!0),R(Js,{time:N(r),"utc-offset":w.value,"working-hours":d.value,"working-hours-enabled":_.value,"has-online-agents":N(s),"reply-time":m.value,"is-online":N(i),"is-in-working-hours":N(c),class:z([e.textClasses,"text-n-slate-11"])},null,8,["time","utc-offset","working-hours","working-hours-enabled","has-online-agents","reply-time","is-online","is-in-working-hours","class"])]),e.showAvatars&&N(i)?(O(),he(Qs,{key:0,users:e.agents},null,8,["users"])):H("",!0)]))}},ro={class:"flex justify-between w-full p-5 bg-n-background gap-2"},so={class:"flex items-center"},oo=["src"],io={class:"flex flex-col gap-1"},uo={class:"flex items-center text-base font-medium leading-4 text-n-slate-12"},lo={class:"ltr:mr-1 rtl:ml-1"},co={__name:"ChatHeader",props:{avatarUrl:{type:String,default:""},title:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},availableAgents:{type:Array,default:()=>[]}},setup(e){const a=Gt(e,"availableAgents"),n=Kt(),{isOnline:o}=bt(a),r=()=>{n.replace({name:"home"})};return(s,i)=>{const u=Xt("dompurify-html");return O(),D("header",ro,[F("div",so,[e.showBackButton?(O(),D("button",{key:0,class:"px-2 ltr:-ml-3 rtl:-mr-3",onClick:r},[R(jt,{icon:"chevron-left",size:"24",class:"text-n-slate-12"})])):H("",!0),e.avatarUrl?(O(),D("img",{key:1,class:"w-8 h-8 ltr:mr-3 rtl:ml-3 rounded-full",src:e.avatarUrl,alt:"avatar"},null,8,oo)):H("",!0),F("div",io,[F("div",uo,[Te(F("span",lo,null,512),[[u,e.title]]),F("div",{class:z(`h-2 w-2 rounded-full
              ${N(o)?"bg-n-teal-10":"hidden"}`)},null,2)]),R(no,{agents:a.value,"show-header":!1,"show-avatars":!1,"text-classes":"text-xs leading-3"},null,8,["agents"])])]),R(Ta,{"show-popout-button":e.showPopoutButton},null,8,["show-popout-button"])])}}},fo={class:"header-expanded pt-6 pb-4 px-5 relative box-border w-full bg-transparent"},go=["src"],po={class:"mt-4 text-2xl mb-1.5 font-medium text-n-slate-12 line-clamp-4"},ho={class:"text-lg leading-normal text-n-slate-11 [&_a]:underline line-clamp-6"},vo={__name:"ChatHeaderExpanded",props:{avatarUrl:{type:String,default:""},introHeading:{type:String,default:""},introBody:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1}},setup(e){const t=e,{formatMessage:a}=Pa(),n=S(()=>[t.avatarUrl?"justify-between":"justify-end"]);return(o,r)=>{const s=Xt("dompurify-html");return O(),D("header",fo,[F("div",{class:z(["flex items-start",n.value])},[e.avatarUrl?(O(),D("img",{key:0,class:"h-12 rounded-full",src:e.avatarUrl,alt:"Avatar"},null,8,go)):H("",!0),R(Ta,{"show-popout-button":e.showPopoutButton,"show-end-conversation-button":!1},null,8,["show-popout-button"])],2),Te(F("h2",po,null,512),[[s,e.introHeading]]),Te(F("p",ho,null,512),[[s,N(a)(e.introBody)]])])}}},mo={components:{Banner:Vs,Branding:sn,ChatHeader:co,ChatHeaderExpanded:vo},mixins:[yt],data(){return{showPopoutButton:!1,scrollPosition:0,ticking:!0,disableBranding:window.chatwootWebChannel.disableBranding||!1,requestID:null}},computed:{...vt({appConfig:"appConfig/getAppConfig",availableAgents:"agent/availableAgents"}),portal(){return window.chatwootWebChannel.portal},isHeaderCollapsed(){return this.hasIntroText?!this.isOnHomeView:!0},hasIntroText(){return this.channelConfig.welcomeTitle||this.channelConfig.welcomeTagline},showBackButton(){return["article-viewer","messages","prechat-form"].includes(this.$route.name)},isOnArticleViewer(){return["article-viewer"].includes(this.$route.name)},isOnHomeView(){return["home"].includes(this.$route.name)},opacityClass(){return this.isHeaderCollapsed?{}:this.scrollPosition>30?{"opacity-30":!0}:this.scrollPosition>25?{"opacity-40":!0}:this.scrollPosition>20?{"opacity-60":!0}:this.scrollPosition>15?{"opacity-80":!0}:this.scrollPosition>10?{"opacity-90":!0}:{}}},mounted(){this.$el.addEventListener("scroll",this.updateScrollPosition)},unmounted(){this.$el.removeEventListener("scroll",this.updateScrollPosition),cancelAnimationFrame(this.requestID)},methods:{closeWindow(){P.sendMessage({event:"closeWindow"})},updateScrollPosition(e){this.scrollPosition=e.target.scrollTop,this.ticking||(this.requestID=window.requestAnimationFrame(()=>{this.ticking=!1}),this.ticking=!0)}}},_o={class:"relative flex flex-col h-full"};function wo(e,t,a,n,o,r){const s=te("ChatHeaderExpanded"),i=te("ChatHeader"),u=te("Banner"),c=te("router-view"),d=te("Branding");return O(),D("div",{class:z(["w-full h-full bg-n-slate-2 dark:bg-n-solid-1",{"overflow-auto":r.isOnHomeView}]),onKeydown:t[0]||(t[0]=Oa((..._)=>r.closeWindow&&r.closeWindow(..._),["esc"]))},[F("div",_o,[F("div",{class:z({expanded:!r.isHeaderCollapsed,collapsed:r.isHeaderCollapsed,"shadow-[0_10px_15px_-16px_rgba(50,50,93,0.08),0_4px_6px_-8px_rgba(50,50,93,0.04)]":r.isHeaderCollapsed,...r.opacityClass})},[r.isHeaderCollapsed?H("",!0):(O(),he(s,{key:0,"intro-heading":e.appConfig.welcomeTitle||e.channelConfig.welcomeTitle,"intro-body":e.appConfig.welcomeDescription||e.channelConfig.welcomeTagline,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton},null,8,["intro-heading","intro-body","avatar-url","show-popout-button"])),r.isHeaderCollapsed?(O(),he(i,{key:1,title:e.channelConfig.websiteName,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton,"available-agents":e.availableAgents,"show-back-button":r.showBackButton},null,8,["title","avatar-url","show-popout-button","available-agents","show-back-button"])):H("",!0)],2),R(u),R(c),r.isOnArticleViewer?H("",!0):(O(),he(d,{key:0,"disable-branding":o.disableBranding},null,8,["disable-branding"]))])],34)}const Co=me(mo,[["render",wo]]),xt=Va({history:qa(),routes:[{path:"/unread-messages",name:"unread-messages",component:()=>se(()=>import("./UnreadMessages-B8kCEOjN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))},{path:"/campaigns",name:"campaigns",component:()=>se(()=>import("./Campaigns-_d3lWSYp.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))},{path:"/",component:Co,children:[{path:"",name:"home",component:()=>se(()=>import("./Home-DkuEY_n1.js"),__vite__mapDeps([19,2,15,12,1,3,4,11,9,8,16,10,7,17,6]))},{path:"/prechat-form",name:"prechat-form",component:()=>se(()=>import("./PreChatForm-Bn4KdhxQ.js"),__vite__mapDeps([20,1,2,3,4,11,12,9,21,8,10,22,6,7,15,16,17,23]))},{path:"/messages",name:"messages",component:()=>se(()=>import("./Messages-Bhm_JZLS.js"),__vite__mapDeps([24,1,2,3,4,21,6,7,25,11,12,9,10,26,8,27,28,15,29,16,17,30]))},{path:"/article",name:"article-viewer",component:()=>se(()=>import("./ArticleViewer-Cl1FioXJ.js"),__vite__mapDeps([31,32,2,1,3,4]))}]}]});xt.beforeEach(async(e,t,a)=>{await _e.dispatch("appConfig/setRouteTransitionState",!0),a()});xt.afterEach(()=>{_e.dispatch("appConfig/setRouteTransitionState",!1)});const yo=Ia({legacy:!1,locale:"en",messages:nn}),ne=Da(Ys);ne.use(yo);ne.use(_e);ne.use(xt);ne.use(Na,on);ne.directive("on-clickaway",un);ne.use(tn,an({rules:{startsWithPlus:({value:e})=>Xa(e),isValidPhoneNumber:({value:e})=>Ga(e)}}));window.onload=()=>{window.WOOT_WIDGET=ne.mount("#app"),window.actionCable=new Et(window.WOOT_WIDGET,window.chatwootPubsubToken)};export{A,P as I,tr as O,no as _,er as a,ar as b,yt as c,In as i,Wo as s,Xr as u};
//# sourceMappingURL=widget-Bk73qFtR.js.map
